(window.webpackJsonp=window.webpackJsonp||[]).push([[146],{464:function(a,s,t){"use strict";t.r(s);var r=t(3),e=Object(r.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("blockquote",[s("p",[a._v("对于应用不多，就没必要使用 Kubernetes 来耗费服务器资源了，使用 Docker-Compose 进行容器编排以及 Portainer 即可。")])]),a._v(" "),s("p",[s("a",{attrs:{href:"https://www.portainer.io/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Portainer"),s("OutboundLink")],1),a._v(" 是一个可视化的容器镜像的图形管理工具，利用 Portainer 可以轻松构建，管理和维护 Docker 环境；而且完全免费，基于容器化的安装方式，方便高效部署。")]),a._v(" "),s("h2",{attrs:{id:"一、安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、安装"}},[a._v("#")]),a._v(" 一、安装")]),a._v(" "),s("div",{staticClass:"language-powershell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[a._v("docker volume create portainer_data\ndocker run "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("itd "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("name portainer \\\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("p 9000:9000 \\\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("p 9443:9443 \\\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("restart=always  \\\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("v "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("var")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("run/docker"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("sock:"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("var")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("run/docker"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("sock \\\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("v portainer_data:"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("data")]),a._v(" \\\n  portainer/portainer-ce:alpine\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br")])]),s("h2",{attrs:{id:"二、配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、配置"}},[a._v("#")]),a._v(" 二、配置")]),a._v(" "),s("p",[a._v("安装完成以后，浏览器访问 http://127.0.0.1:9000 或者 https://127.0.0.1:9443 进入控制台，创建管理密码：\n"),s("img",{attrs:{src:"https://f.pz.al/pzal/2023/01/13/e10c7acb8b606.png",alt:"image.png"}}),a._v("\n选择“Get Started”进入\n"),s("img",{attrs:{src:"https://f.pz.al/pzal/2023/01/13/c73302456f0e5.png",alt:"image.png"}}),a._v("\n点击本地，就可以看到例如：Stack、容器运行时、本地镜像、存储卷、网络\n"),s("img",{attrs:{src:"https://f.pz.al/pzal/2023/01/13/197d3e4651a90.png",alt:"image.png"}}),a._v(" "),s("img",{attrs:{src:"https://f.pz.al/pzal/2023/01/13/aa9b85cb9f656.png",alt:"image.png"}}),a._v("\n更多内容见《"),s("a",{attrs:{href:"https://docs.portainer.io/",target:"_blank",rel:"noopener noreferrer"}},[a._v("官方文档"),s("OutboundLink")],1),a._v("》，个人感觉如此简洁的界面，没必要去汉化。\n"),s("img",{attrs:{src:"https://f.pz.al/pzal/2023/01/13/a1863410e4fbb.png",alt:"image.png"}})]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" network create "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--driver")]),a._v(" overlay portainer_agent_network\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("service")]),a._v(" create "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" portainer_agent "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--network")]),a._v(" portainer_agent_network "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("9001")]),a._v(":9001/tcp "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--mode")]),a._v(" global "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--constraint")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'node.platform.os == linux'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--mount")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("type")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("bind,src"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("//var/run/docker.sock,dst"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/var/run/docker.sock "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--mount")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("type")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("bind,src"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("//var/lib/docker/volumes,dst"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/var/lib/docker/volumes "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  portainer/agent:2.15.0\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br")])]),s("h2",{attrs:{id:"三、故障"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、故障"}},[a._v("#")]),a._v(" 三、故障")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#删除对应的 docker container")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#删除加载的 volume")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v(" /var/lib/docker/volumes/portainer_data\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-rf")]),a._v(" /var/lib/docker/volumes/portainer_data\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#重新运行")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" /app/data/portaine\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("9000")]),a._v(":9000 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("9443")]),a._v(":9443 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" portainer "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("always "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /var/run/docker.sock:/var/run/docker.sock "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /app/data/portaine:/data portainer/portainer-ce:alpine\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);