(window.webpackJsonp=window.webpackJsonp||[]).push([[130],{448:function(s,a,n){"use strict";n.r(a);var t=n(3),e=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),a("h3",{attrs:{id:"安装依赖"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖"}},[s._v("#")]),s._v(" 安装依赖")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" libcurl openssl\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"安装-server"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-server"}},[s._v("#")]),s._v(" 安装 Server")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://www.mongodb.com/download-center#community",target:"_blank",rel:"noopener noreferrer"}},[s._v("点击"),a("OutboundLink")],1),s._v(" 访问 MongoDB 下载地址，依次点击下图所示红框位置\n"),a("img",{attrs:{src:"https://f.pz.al/pzal/2023/01/13/700d57a9902cf.png",alt:"image.png"}})]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://repo.mongodb.org/yum/redhat/7/mongodb-org/5.0/x86_64/RPMS/mongodb-org-server-5.0.6-1.el7.x86_64.rpm\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ivh")]),s._v(" mongodb-org-server-5.0.6-1.el7.x86_64.rpm\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("blockquote",[a("p",[s._v("Created symlink from /etc/systemd/system/multi-user.target.wants/mongod.service to /usr/lib/systemd/system/mongod.service.")])]),s._v(" "),a("h3",{attrs:{id:"安装-shell"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-shell"}},[s._v("#")]),s._v(" 安装 Shell")]),s._v(" "),a("h4",{attrs:{id:"mogo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mogo"}},[s._v("#")]),s._v(" mogo")]),s._v(" "),a("p",[s._v("Linux 版本，命令行工具需要单独安装")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://repo.mongodb.org/yum/redhat/7/mongodb-org/5.0/x86_64/RPMS/mongodb-org-shell-5.0.6-1.el7.x86_64.rpm\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ivh")]),s._v(" mongodb-org-shell-5.0.6-1.el7.x86_64.rpm\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#即将弃用，直接删除")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" mongodb-org-shell-5.0.6-1.el7.x86_64\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("blockquote",[a("p",[s._v('Warning: the "mongo" shell has been superseded by "mongosh",\nwhich delivers improved usability and compatibility.The "mongo" shell has been deprecated and will be removed in\nan upcoming release.\nFor installation instructions, see\n'),a("a",{attrs:{href:"https://docs.mongodb.com/mongodb-shell/install/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://docs.mongodb.com/mongodb-shell/install/"),a("OutboundLink")],1)])]),s._v(" "),a("p",[s._v("卸载安装"),a("code",[s._v("mongosh")]),s._v("即可解决报错")]),s._v(" "),a("h4",{attrs:{id:"mongosh"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mongosh"}},[s._v("#")]),s._v(" mongosh")]),s._v(" "),a("p",[s._v("创建"),a("code",[s._v("YUM")]),s._v("源，"),a("code",[s._v("vi /etc/yum.repos.d/mongodb-org-5.0.repo")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mongodb-org-5.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("MongoDB Repository\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("baseurl")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://repo.mongodb.org/yum/redhat/"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$releasever")]),s._v("/mongodb-org/5.0/"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$basearch")]),s._v("/\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gpgcheck")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("enabled")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gpgkey")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://www.mongodb.org/static/pgp/server-5.0.asc\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" mongodb-mongosh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[s._v("Warning: Found ~/.mongorc.js, but not ~/.mongoshrc.js. ~/.mongorc.js will not be loaded.\nYou may want to copy or rename ~/.mongorc.js to ~/.mongoshrc.js.")])]),s._v(" "),a("p",[s._v("新的"),a("code",[s._v("mongosh")]),s._v("在启动时读取"),a("code",[s._v(".mongoshrc.js")]),s._v("文件，传统的"),a("code",[s._v("mongo")]),s._v("读取"),a("code",[s._v(".mongorc.js")]),s._v("文件；只需要把"),a("code",[s._v(".mongorc.js")]),s._v("重命名或者复制一份改名为"),a("code",[s._v(".mongoshrc.js")]),s._v("即可。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" ~/.mongorc.js ~/.mongoshrc.js\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("网上一溜的的"),a("code",[s._v("mongo --norc")]),s._v("，不去加载"),a("code",[s._v(".mongorc.js")]),s._v("也是醉了，完全的逃避问题，不加载就没事了吗？\n源码安装：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-3.4.19.tgz\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" xzf mongodb-linux-x86_64-3.4.19.tgz\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" mongodb-linux-x86_64-3.4.19 /usr/local/mongodb\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("使用 "),a("code",[s._v("vi/etc/profile.d/mongodb.sh")]),s._v(" 命令添加"),a("strong",[s._v("全局变量")]),s._v("：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("exportPATH")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v(":/usr/local/mongodb/bin\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"基本命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本命令"}},[s._v("#")]),s._v(" 基本命令")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("systemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" mongod\nsystemctl start mongod\nsystemctl restart mongod\nsystemctl stop mongod\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"数据目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据目录"}},[s._v("#")]),s._v(" 数据目录")]),s._v(" "),a("p",[a("code",[s._v("MongoDB")]),s._v("启动后会初始化以下目录和文件，并赋予"),a("code",[s._v("mongod:mongod")]),s._v("权限：")]),s._v(" "),a("ul",[a("li",[s._v("默认配置文件：/etc/mongod.conf")]),s._v(" "),a("li",[s._v("数据存储目录：/var/lib/mongo")]),s._v(" "),a("li",[s._v("日志文件目录：/var/log/mongodb")]),s._v(" "),a("li",[s._v("运行文件目录：/var/run/mongodb")])]),s._v(" "),a("h2",{attrs:{id:"使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[s._v("#")]),s._v(" 使用")]),s._v(" "),a("h3",{attrs:{id:"修改配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改配置"}},[s._v("#")]),s._v(" 修改配置")]),s._v(" "),a("p",[s._v("使用"),a("code",[s._v("vi /etc/mongod.conf")]),s._v("根据需要修改，更改端口、开启授权等等：")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[s._v("# mongod.conf\n\n# for documentation of all options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" see"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n#   http"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//docs.mongodb.org/manual/reference/configuration-options/")]),s._v("\n\n# where to write logging data.\nsystemLog"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\ndestination"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" file\nlogAppend"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\npath"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" /var/log/mongodb/mongod.log\n\n# Where and how to store data.\nstorage"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\ndbPath"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" /var/lib/mongo\njournal"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\nenabled"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n#  engine"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n#  wiredTiger"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n\n# how the process runs\nprocessManagement"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\nfork"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("  # fork and run in background\npidFilePath"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" /var/run/mongodb/mongod.pid  # location of pidfile\ntimeZoneInfo"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" /usr/share/zoneinfo\n\n# network interfaces\nnet"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\nport"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v("\nbindIp"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v("  # Enter "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" to bind to all IPv4 and IPv6 addresses or"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" alternatively"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" use the net.bindIpAll setting.\n\n\nsecurity"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\nauthorization"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" enabled\n\n#operationProfiling"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n\n#replication"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n\n#sharding"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n\n## Enterprise-Only Options\n\n#auditLog"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n\n#snmp"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br")])]),a("h3",{attrs:{id:"shell-命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#shell-命令"}},[s._v("#")]),s._v(" Shell 命令")]),s._v(" "),a("p",[s._v("如果安装了 Shell 工具的话，直接"),a("code",[s._v("mongo")]),s._v("或"),a("code",[s._v("mongosh")]),s._v("即可打开工具")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("Current Mongosh Log ID: 6232f88f78db3f40f006cfa2\nConnecting to:          mongodb://127.0.0.1:27017/?directConnection"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("serverSelectionTimeoutMS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("appName")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mongosh+1.2.3\nUsing MongoDB:          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.0")]),s._v(".6\nUsing Mongosh:          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.2")]),s._v(".3\n\nFor mongosh info see: https://docs.mongodb.com/mongodb-shell/\n\ntest"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h3",{attrs:{id:"常用命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用命令"}},[s._v("#")]),s._v(" 常用命令")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("show dbs "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#显示数据库列表 ")]),s._v("\nshow collections "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#显示当前数据库中的集合（类似关系数据库中的表）")]),s._v("\nshow "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("users")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#显示用户")]),s._v("\nuse "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("db name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#切换当前数据库，如果数据库不存在则创建数据库。 ")]),s._v("\ndb.help"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#显示数据库操作命令，里面有很多的命令 ")]),s._v("\ndb.foo.help"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#显示集合操作命令，同样有很多的命令，foo指的是当前数据库下，一个叫foo的集合，并非真正意义上的命令 ")]),s._v("\ndb.foo.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#对于当前数据库中的foo集合进行数据查找（由于没有条件，会列出所有数据） ")]),s._v("\ndb.foo.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" a "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#对于当前数据库中的foo集合进行查找，条件是数据中有一个属性叫a，且a的值为1")]),s._v("\ndb.dropDatabase"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#删除当前使用数据库")]),s._v("\ndb.cloneDatabase"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"127.0.0.1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#将指定机器上的数据库的数据克隆到当前数据库")]),s._v("\ndb.copyDatabase"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mydb"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"temp"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"127.0.0.1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#将本机的mydb的数据复制到temp数据库中")]),s._v("\ndb.repairDatabase"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#修复当前数据库")]),s._v("\ndb.getName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看当前使用的数据库，也可以直接用db")]),s._v("\ndb.stats"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#显示当前db状态")]),s._v("\ndb.version"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#当前db版本")]),s._v("\ndb.getMongo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看当前db的链接机器地址")]),s._v("\ndb.serverStatus"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看数据库服务器的状态")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("h3",{attrs:{id:"创建账户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建账户"}},[s._v("#")]),s._v(" 创建账户")]),s._v(" "),a("p",[s._v("MongoDB 安装完成后，数据库"),a("code",[s._v("admin")]),s._v("中没有任何用户账户，MongoDB 向从本地主机发起的连接提供全面的数据库管理权限；因此配置 MongoDB 新实例时，首先需要创建"),a("strong",[s._v("用户管理员")]),s._v("和"),a("strong",[s._v("数据库管理员")]),s._v("："),a("strong",[s._v("用户管理员")]),s._v("可在 admin 和其他数据库中创建用户账户，"),a("strong",[s._v("数据库管理员")]),s._v("将其作为管理数据库、集群、复制和 MongoDB 其他方面的超级用户")]),s._v(" "),a("ul",[a("li",[s._v("db.createUser")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("db.createUser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    user: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$USERNAME")]),s._v('"')]),s._v(",\n    pwd: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PASSWROD")]),s._v('"')]),s._v(",\n    roles: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" role: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ROLE_NAME")]),s._v('"')]),s._v(", db: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$DBNAME")]),s._v('"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("mongosh\ntest"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" use admin\nswitched to db admin\ndb.createUser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    user: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin"')]),s._v(",\n    pwd: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"12345678"')]),s._v(",\n    roles: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" role: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"userAdminAnyDatabase"')]),s._v(", db: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("blockquote",[a("p",[s._v("{ ok: 1 }")])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("预定义角色\n| "),a("strong",[s._v("详细角色")]),s._v(" | "),a("strong",[s._v("角色")]),s._v(" | "),a("strong",[s._v("数据库")]),s._v(" |\n| --- | --- | --- |\n| "),a("strong",[s._v("read")]),s._v("：用户可以读取当前数据库的数据\n"),a("strong",[s._v("readWrite")]),s._v("：用户可以读写当前数据库的数据 | 数据库用户 | 所有数据库 |\n| "),a("strong",[s._v("dbAdmin")]),s._v("：管理员用户但不能对用户和角色管理授权\n"),a("strong",[s._v("dbOwner")]),s._v("：数据库所有者可进行任何管理任务\n"),a("strong",[s._v("userAdmin")]),s._v("：可以管理当前数据的用户和角色 | 数据库管理 | 所有数据库 |\n| "),a("strong",[s._v("clusterAdmin")]),s._v("：集群所有管理权限\n"),a("strong",[s._v("clusterManager")]),s._v("：集群管理和监控\n"),a("strong",[s._v("clusterMonitor")]),s._v("：集群监控，只读\n"),a("strong",[s._v("hostManager")]),s._v("：监控和管理服务器 | 集群管理 | admin 数据库 |\n| "),a("strong",[s._v("backup")]),s._v("：数据库的备份权限\n"),a("strong",[s._v("restore")]),s._v("：数据库的恢复权限 | 备份恢复 | admin 数据库 |\n| "),a("strong",[s._v("readAnyDatabase")]),s._v("：读取所有数据库\n"),a("strong",[s._v("readWriteAnyDatabase")]),s._v("：读写所有数据库\n"),a("strong",[s._v("userAdminAnyDatabase")]),s._v("：所有数据库的 userAdmin 权限\n"),a("strong",[s._v("dbAdminAnyDatabase")]),s._v("：所有数据库的 dbAdmin 权限 | 所有数据库 | admin 数据库 |\n| "),a("strong",[s._v("root")]),s._v("：超级用户 | 超级 | admin 数据库 |\n| "),a("strong",[s._v("__system")]),s._v("：所有操作权限 | 内部 |  |")])]),s._v(" "),a("li",[a("p",[s._v("登录\n重启后重新登录，需要授权登录")])])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("use admin\ndb.auth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"12345678"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("或者直接进入 shell 时："),a("code",[s._v('mongosh -u "admin" -p "12345678" --authenticationDatabase admin')])])])}),[],!1,null,null,null);a.default=e.exports}}]);