(window.webpackJsonp=window.webpackJsonp||[]).push([[96],{416:function(a,s,t){"use strict";t.r(s);var r=t(3),e=Object(r.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"一、工具"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、工具"}},[a._v("#")]),a._v(" 一、工具")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("/app/service/mysql/bin/mysql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-uroot")]),a._v(" -p"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'aU$rh@^S8BgY'")]),a._v("\n./mysqldump "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-uroot")]),a._v(" -p"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'aU$rh@^S8BgY'")]),a._v(" --master-data --all-databases "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" master.sql\n\nCREATE TABLE "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),a._v("Z_Demo"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),a._v("NAME"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v(" varchar"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("64")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" COLLATE utf8_bin NOT NULL,\n  "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),a._v("REV"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v(" int DEFAULT NULL,\n  PRIMARY KEY "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),a._v("NAME"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("ENGINE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("InnoDB DEFAULT "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("CHARSET")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("utf8mb3 "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("COLLATE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("utf8_bin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\nDROP TABLE Z_Demo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("scp")]),a._v(" master.sql app@172.24.140.68:/app/temp/\n/app/service/mysql/bin/mysql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-uroot")]),a._v(" -p"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'aU$rh@^S8BgY'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v(" /app/temp/master.sql\n/app/service/mysql/bin/mysqldump "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-uroot")]),a._v(" -p"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'aU$rh@^S8BgY'")]),a._v(" webank "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" /app/temp/webank.sql\n/app/service/mysql/bin/mysql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-uroot")]),a._v(" -p"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'aU$rh@^S8BgY'")]),a._v(" webank "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v(" /app/temp/webank.sql\nmysql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-uwebank")]),a._v(" -p"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'WB@45678'")]),a._v("\nmysql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-uedm_base")]),a._v(" -p"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'tn2qz3WS*uC'")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("##ETL")]),a._v("\n/app/service/mysql/bin/mysql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-uroot")]),a._v(" -p"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'aU$rh@^S8BgY'")]),a._v("\nGRANT ALL PRIVILEGES ON webank_etl.* TO "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'webank'")]),a._v("@"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'%'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nFLUSH PRIVILEGES"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n/app/service/mysql/bin/mysql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-h172.24.140.69")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-P3306")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-uwebank")]),a._v(" -p"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'WB@45678'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"use webank_etl"')]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br")])]),s("h3",{attrs:{id:"_1-mysqldump"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-mysqldump"}},[a._v("#")]),a._v(" 1.mysqldump")]),a._v(" "),s("h3",{attrs:{id:"_2-xtrabackup"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-xtrabackup"}},[a._v("#")]),a._v(" 2.xtrabackup")]),a._v(" "),s("p",[s("a",{attrs:{href:"https://www.percona.com",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://www.percona.com"),s("OutboundLink")],1)]),a._v(" "),s("h3",{attrs:{id:"_3-navicat"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-navicat"}},[a._v("#")]),a._v(" 3.Navicat")]),a._v(" "),s("h2",{attrs:{id:"二、所有"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、所有"}},[a._v("#")]),a._v(" 二、所有")]),a._v(" "),s("p",[a._v("保证版本一致的情况下直接复制复制数据目录也行")]),a._v(" "),s("h3",{attrs:{id:"_1-备份"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-备份"}},[a._v("#")]),a._v(" 1.备份")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("mysqldump "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-u")]),a._v(" root "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" --all-databases "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" /tmp/db.sql\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"_2-恢复"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-恢复"}},[a._v("#")]),a._v(" 2.恢复")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("source")]),a._v(" /tmp/db.sql"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n或\nmysql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-uroot")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v(" /tmp/db.sql \n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("h2",{attrs:{id:"三、按库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、按库"}},[a._v("#")]),a._v(" 三、按库")]),a._v(" "),s("p",[a._v("使用 Navicat Premium 备份恢复更加简便\n"),s("img",{attrs:{src:"https://f.pz.al/pzal/2023/01/13/59fc0abd860bb.png",alt:"image.png"}})]),a._v(" "),s("h2",{attrs:{id:"四、按表"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#四、按表"}},[a._v("#")]),a._v(" 四、按表")]),a._v(" "),s("h3",{attrs:{id:"_1-备份-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-备份-2"}},[a._v("#")]),a._v(" 1.备份")]),a._v(" "),s("p",[a._v("右键要备份的表，转存 SQL 文件\n"),s("img",{attrs:{src:"https://f.pz.al/pzal/2023/01/13/015aec409e059.png",alt:"image.png"}})]),a._v(" "),s("h3",{attrs:{id:"_2-恢复-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-恢复-2"}},[a._v("#")]),a._v(" 2.恢复")]),a._v(" "),s("p",[a._v("如果需要恢复，删除新表，运行上次转存出来的表即可")])])}),[],!1,null,null,null);s.default=e.exports}}]);