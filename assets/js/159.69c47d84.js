(window.webpackJsonp=window.webpackJsonp||[]).push([[159],{477:function(a,t,s){"use strict";s.r(t);var e=s(3),r=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h2",{attrs:{id:"jenkins"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jenkins"}},[a._v("#")]),a._v(" Jenkins")]),a._v(" "),t("h3",{attrs:{id:"新建-job"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#新建-job"}},[a._v("#")]),a._v(" 新建 Job")]),a._v(" "),t("p",[a._v("新建一个“构建一个自由风格的软件项目”\n![image.png]("),t("img",{attrs:{src:"https://f.pz.al/pzal/2023/01/13/5702bfaff59b4.png",alt:"image 34.png"}}),a._v(")")]),a._v(" "),t("h4",{attrs:{id:"源码管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#源码管理"}},[a._v("#")]),a._v(" 源码管理")]),a._v(" "),t("p",[a._v("添加 Git 见《"),t("a",{attrs:{href:"https://www.yuque.com/weiwiki/da4l8e/lwmmgw#j46M7",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://www.yuque.com/weiwiki/da4l8e/lwmmgw#j46M7"),t("OutboundLink")],1),a._v("》")]),a._v(" "),t("h4",{attrs:{id:"构建触发器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#构建触发器"}},[a._v("#")]),a._v(" 构建触发器")]),a._v(" "),t("p",[a._v("红框部分网址用于 "),t("strong",[a._v("GitLab Webhook")]),a._v(" 的网址部分：\n![image.png]("),t("img",{attrs:{src:"https://f.pz.al/pzal/2023/01/13/b4421b727335d.png",alt:"image 35.png"}}),a._v(")\n依此点击“高级”和“Generate”按钮生成 "),t("strong",[a._v("GitLab WebHook")]),a._v(" 需要的 Token：\n![image.png]("),t("img",{attrs:{src:"https://f.pz.al/pzal/2023/01/13/1952ba091cdfe.png",alt:"image 36.png"}}),a._v(")")]),a._v(" "),t("h4",{attrs:{id:"构建环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#构建环境"}},[a._v("#")]),a._v(" 构建环境")]),a._v(" "),t("p",[a._v("需要提前安装 "),t("a",{attrs:{href:"/pages/nodejs-linux"}},[a._v("NodeJS 环境")]),a._v("\n![image.png]("),t("img",{attrs:{src:"https://f.pz.al/pzal/2023/01/13/07245de3c166b.png",alt:"image 37.png"}}),a._v(")")]),a._v(" "),t("h4",{attrs:{id:"构建"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#构建"}},[a._v("#")]),a._v(" 构建")]),a._v(" "),t("p",[a._v("执行 Shell")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--registry")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("https://registry.npm.taobao.org\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-rf")]),a._v(" ./dist/*\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" cache clean "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" run build:prod\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("zip")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-q")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-r")]),a._v(" home.zip ./dist\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("scp")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-r")]),a._v(" ./home.zip www@IP:/home/www/scigo/web/home\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ssh")]),a._v(" www@IP "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('""')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-rf")]),a._v(" ./home.zip\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br")])]),t("p",[a._v("![image.png]("),t("img",{attrs:{src:"https://f.pz.al/pzal/2023/01/13/87a5787c21bae.png",alt:"image 38.png"}}),a._v(")")]),a._v(" "),t("h3",{attrs:{id:"构建项目"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#构建项目"}},[a._v("#")]),a._v(" 构建项目")]),a._v(" "),t("p",[a._v("点击“立即构建”\n![image.png]("),t("img",{attrs:{src:"https://f.pz.al/pzal/2023/01/13/b80d50bd9b211.png",alt:"image 39.png"}}),a._v(")")]),a._v(" "),t("h2",{attrs:{id:"gitlab"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gitlab"}},[a._v("#")]),a._v(" GitLab")]),a._v(" "),t("h3",{attrs:{id:"webhook"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webhook"}},[a._v("#")]),a._v(" WebHook")]),a._v(" "),t("h4",{attrs:{id:"设置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置"}},[a._v("#")]),a._v(" 设置")])])}),[],!1,null,null,null);t.default=r.exports}}]);