(window.webpackJsonp=window.webpackJsonp||[]).push([[126],{444:function(s,t,a){"use strict";a.r(t);var e=a(3),r=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("blockquote",[t("p",[s._v("微软商店安装 CentOS 子系统居然收费，本文通过 "),t("a",{attrs:{href:"https://github.com/DDoSolitary/LxRunOffline",target:"_blank",rel:"noopener noreferrer"}},[s._v("LxRunOffline"),t("OutboundLink")],1),s._v(" "),t("s",[s._v("和 "),t("s",[t("a",{attrs:{href:"https://github.com/RoliSoft/WSL-Distribution-Switcher/",target:"_blank",rel:"noopener noreferrer"}},[t("s",[s._v("WSL-Distribution-Switcher")]),t("OutboundLink")],1)]),s._v("（报错）")]),s._v(" 安装 CentOS 子系统")])]),s._v(" "),t("h2",{attrs:{id:"一、开启功能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、开启功能"}},[s._v("#")]),s._v(" 一、开启功能")]),s._v(" "),t("p",[s._v("方式一：使用管理员权限打开 Powershell 执行，重启电脑完成安装")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("Enable-WindowsOptionalFeature "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-Online")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-FeatureName")]),s._v(" Microsoft-Windows-Subsystem-Linux\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("方式二：控制面板->程序->启用或关闭 Windows 功能->勾选适用于 Linux 的 Windows 子系统，确定；重启电脑完成安装\n"),t("img",{attrs:{src:"https://f.pz.al/pzal/2023/01/13/827ff40445f80.png",alt:"image.png"}})]),s._v(" "),t("h2",{attrs:{id:"二、安装系统"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、安装系统"}},[s._v("#")]),s._v(" 二、安装系统")]),s._v(" "),t("h3",{attrs:{id:"_1-辅助软件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-辅助软件"}},[s._v("#")]),s._v(" 1.辅助软件")]),s._v(" "),t("h4",{attrs:{id:"_1-1-软件下载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-软件下载"}},[s._v("#")]),s._v(" 1.1.软件下载")]),s._v(" "),t("ul",[t("li",[s._v("最新版本： "),t("a",{attrs:{href:"https://github.com/DDoSolitary/LxRunOffline/releases",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/DDoSolitary/LxRunOffline/releases"),t("OutboundLink")],1)]),s._v(" "),t("li",[s._v("开发版本："),t("a",{attrs:{href:"https://ddosolitary-builds.sourceforge.io/LxRunOffline/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://ddosolitary-builds.sourceforge.io/LxRunOffline/"),t("OutboundLink")],1)])]),s._v(" "),t("h4",{attrs:{id:"_1-2-右键菜单"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-右键菜单"}},[s._v("#")]),s._v(" 1.2.右键菜单")]),s._v(" "),t("p",[s._v("右键菜单（msvc）功能要求正确注册 shell 扩展 DLL，使用 Chocolatey 安装此项目会自动完成此操作；如果是直接下载的程序文件，则需要手动运行以注册 DLL 文件")]),s._v(" "),t("div",{staticClass:"language-basic line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-basic"}},[t("code",[s._v("choco install lxrunoffline\nscoop bucket add extrasscoop install lxrunoffline\nregsvr32 LxRunOfflineShellExt.dll\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"_2-系统镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-系统镜像"}},[s._v("#")]),s._v(" 2.系统镜像")]),s._v(" "),t("p",[s._v("直接点击下方链接下载，如：centos-7-docker.tar.xz")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://raw.githubusercontent.com/CentOS/sig-cloud-instance-images/a77b36c6c55559b0db5bf9e74e61d32ea709a179/docker/centos-7-docker.tar.xz",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://raw.githubusercontent.com/CentOS"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://buildlogs.centos.org/centos/7/docker/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://buildlogs.centos.org/centos/7/docker/"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://hub.docker.com/_/centos/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://hub.docker.com/_/centos/"),t("OutboundLink")],1),s._v(" 配合 "),t("a",{attrs:{href:"https://pullimage.passerma.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://pullimage.passerma.com/"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/mishamosher/CentOS-WSL",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/mishamosher/CentOS-WSL"),t("OutboundLink")],1)])]),s._v(" "),t("h3",{attrs:{id:"_3-镜像安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-镜像安装"}},[s._v("#")]),s._v(" 3.镜像安装")]),s._v(" "),t("p",[s._v("创建 D:\\WSL 文件夹作为安装使用目录（自定义）并将 LxRunOffline.exe 和 rootfs_centos_centos7.tar.xz 复制到 D:\\WSL 下，进入 D:\\WSL 右键“在 Windwos Terminal 中打开”")]),s._v(" "),t("blockquote",[t("p",[s._v("想全局使用 LxRunOffline.exe，请加入系统环境变量，则不需要拷贝 LxRunOffline.exe")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://f.pz.al/pzal/2023/01/13/1508c9d53fb9e.png",alt:"image.png"}}),s._v("\n输入一下相应的命令创建子系统分发版，分发版名称"),t("strong",[s._v("不要有空格")])]),s._v(" "),t("div",{staticClass:"language-basic line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-basic"}},[t("code",[s._v(".\\LxRunOffline.exe install "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("n CentOS "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v('d "D'),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\\WSL\\CentOS "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v('" '),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("f D"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\\WSL\\centos"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("docker.tar.xz\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://f.pz.al/pzal/2023/01/13/8f16387b3797f.png",alt:"image.png"}})]),s._v(" "),t("h4",{attrs:{id:"_3-1-查看镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-查看镜像"}},[s._v("#")]),s._v(" 3.1.查看镜像")]),s._v(" "),t("div",{staticClass:"language-basic line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-basic"}},[t("code",[s._v(".\\LxRunOffline.exe list\nCentOS\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h4",{attrs:{id:"_3-2-运行镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-运行镜像"}},[s._v("#")]),s._v(" 3.2.运行镜像")]),s._v(" "),t("div",{staticClass:"language-basic line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-basic"}},[t("code",[s._v(".\\LxRunOffline.exe "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("run")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("n CentOS\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"_3-3-卸载镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-卸载镜像"}},[s._v("#")]),s._v(" 3.3.卸载镜像")]),s._v(" "),t("div",{staticClass:"language-basic line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-basic"}},[t("code",[s._v(".\\LxRunOffline.exe uninstall "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("n CentOS\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("残留文件需要手动删除")]),s._v(" "),t("h4",{attrs:{id:"_3-4-快捷方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-快捷方式"}},[s._v("#")]),s._v(" 3.4.快捷方式")]),s._v(" "),t("p",[s._v("一般命令行创建失败，则使用管理员模式打开命令提示符")]),s._v(" "),t("div",{staticClass:"language-basic line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-basic"}},[t("code",[s._v("Lxrunoffline s "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("n CentOS "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("f 'C"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\\Users\\Administrator\\Desktop\\CentOS.lnk'\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("也可以直接 Widnwos Terminal 中找到对应的名字，然后点击启动\n"),t("img",{attrs:{src:"https://f.pz.al/pzal/2023/01/13/e6f5107182ad9.png",alt:"image.png"}})]),s._v(" "),t("h2",{attrs:{id:"三、常见故障"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、常见故障"}},[s._v("#")]),s._v(" 三、常见故障")]),s._v(" "),t("ul",[t("li",[s._v("不存在具有提供的名称的分布")])]),s._v(" "),t("blockquote",[t("p",[s._v("[已退出进程,代码为 4294967295 (0xffffffff)]")])]),s._v(" "),t("p",[s._v("排除分支版名称带空格的问题，就关闭“适用于 Linux 的 Windows 子系统”再重新打开，然后重启电脑。\n关闭“适用于 Linux 的 Windows 子系统”")]),s._v(" "),t("div",{staticClass:"language-powershell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[s._v("dism"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exe "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("online "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("disable-feature")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("featurename:Microsoft-Windows-Subsystem-Linux "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("norestart\ndism"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exe "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("online "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("disable-feature")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("featurename:VirtualMachinePlatform "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("norestart\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("重新开启“适用于 Linux 的 Windows 子系统”")]),s._v(" "),t("div",{staticClass:"language-powershell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[s._v("dism"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exe "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("online "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("enable-feature")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("featurename:Microsoft-Windows-Subsystem-Linux "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("all "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("norestart\ndism"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exe "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("online "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("enable-feature")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("featurename:VirtualMachinePlatform "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("all "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("norestart\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("然后重启 Windows 系统")])])}),[],!1,null,null,null);t.default=r.exports}}]);