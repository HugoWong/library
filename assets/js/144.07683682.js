(window.webpackJsonp=window.webpackJsonp||[]).push([[144],{457:function(a,s,e){"use strict";e.r(s);var t=e(3),r=Object(t.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),s("p",[a._v("需要先安装好"),s("code",[a._v("JDK")]),a._v("，并且安装启动好 ZooKeeper（"),s("strong",[a._v("不要用自带版本")]),a._v("），"),s("a",{attrs:{href:"https://kafka.apache.org/downloads.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("点击"),s("OutboundLink")],1),a._v("下载 Kafka\n"),s("RouterLink",{attrs:{to:"/pages/zookeeper/"}},[a._v("Zookeeper 单机 & 集群部署")])],1),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /app/software\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#解压并编译安装")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-zxvf")]),a._v(" kafka_2.12-2.4.0.tgz "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" /app/serivce\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mv")]),a._v(" /app/serivce/kafka_2.12-2.4.0 /app/serivce/kafka\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-pv")]),a._v(" /app/data/kafka\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("h2",{attrs:{id:"配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[a._v("#")]),a._v(" 配置")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" /app/serivce/kafka/config/server.properties\n\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("broker.id")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("listeners")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("PLAINTEXT://0.0.0.0:9092\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("log.dirs")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/app/data/kafka\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("num.partitions")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("zookeeper.connect")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("xxx.xxx.xxx.xxx:2181,xxx.xxx.xxx.xxx:2181,xxx.xxx.xxx.xxx:2181\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br")])]),s("h2",{attrs:{id:"集群"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#集群"}},[a._v("#")]),a._v(" 集群")]),a._v(" "),s("p",[a._v("通过 scp 命令复制 /app/serivce/kafka** **到其他需要部署 ZooKeeper 的服务器上")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("scp")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-r")]),a._v(" /app/serivce/kafka root@xxx.xxx.xxx.xxx:/app/midware\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("然后修改每个节点配置文件** server.properties **中的 "),s("strong",[a._v("broker.id")]),a._v(" 和 "),s("strong",[a._v("listeners")]),a._v(" 参数")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#全局唯一标识，每个节点上需要设置不同的值")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("broker.id")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("x\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#设置为当前节点的 IP 地址")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("listeners")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("PLAINTEXT://xxx.xxx.xxx.xxx:9092\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("p",[a._v("然后启动全部节点")]),a._v(" "),s("h2",{attrs:{id:"命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#命令"}},[a._v("#")]),a._v(" 命令")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#启动 Kafka")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /app/serivce/kafka "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" bin/kafka-server-start.sh "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-daemon")]),a._v(" config/server.properties "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#关闭 Kafka")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /app/serivce/kafka "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" bin/kafka-server-stop.sh\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#创建 topic")]),a._v("\n./bin/kafka-topics.sh "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--create")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--topic")]),a._v(" Demo "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--zookeeper")]),a._v(" xxx.xxx.xxx.xxx:2181 --replication-factor "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--partitions")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#产看所有 topic 的分区")]),a._v("\n./bin/kafka-topics.sh --bootstrap-server xxx.xxx.xxx.xxx:9092,xxx.xxx.xxx.xxx:9092,xxx.xxx.xxx.xxx:9092 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--list")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#产看所有 topic 的分区情况")]),a._v("\n./bin/kafka-topics.sh --bootstrap-server xxx.xxx.xxx.xxx:9092,xxx.xxx.xxx.xxx:9092,xxx.xxx.xxx.xxx:9092 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--topic")]),a._v(" Demo "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--describe")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#产看 Demo 的分区情况")]),a._v("\n./bin/kafka-topics.sh --bootstrap-server xxx.xxx.xxx.xxx:9092,xxx.xxx.xxx.xxx:9092,xxx.xxx.xxx.xxx:9092 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--describe")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#查看 topic")]),a._v("\n./bin/kafka-topics.sh "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--list")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--zookeeper")]),a._v(" xxx.xxx.xxx.xxx:2181\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#生产者发送消息")]),a._v("\n./bin/kafka-console-producer.sh --broker-list xxx.xxx.xxx.xxx:9092 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--topic")]),a._v(" Demo\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#消费者接受消息")]),a._v("\n./bin/kafka-console-consumer.sh --bootstrap-server xxx.xxx.xxx.xxx:9092 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--topic")]),a._v(" Demo --from-beginning\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br")])])])}),[],!1,null,null,null);s.default=r.exports}}]);